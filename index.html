<!DOCTYPE html>
<html lang="ru">
    <head>

        <meta                                       charset="UTF-8">
        <meta   http-equiv="Permissions-Policy"     content="interest-cohort=()">
        <meta   http-equiv="Cache-Control"          content="no-cache">
        <meta   http-equiv="Pragma"                 content="no-cache">
        <meta   name="viewport"                     content="width=device-width, initial-scale=1">
        <meta   name="author"                       content="Plutonny">
        <meta   name="description"                  content="my cat ❤️">
        <meta   name="theme-color" id="theme-color" content="#000000">
        <title  id="title-page"                     >my cat ❤️</title>
        <link   rel="manifest"                      href="manifest.json">

        <script type="text/javascript">
            function clgenld() { 
                let clengl = setInterval(function() {
                    try { 
                        document.getElementById('genload').remove()
                    } catch {}
                }, 1); 
            }
        </script>
        
        <!-- fonts and icons -->
        <style>
            @font-face {
                font-family: 'Material Symbols Rounded';
                font-style: normal;
                font-weight: 100 700;
                src: url(https://fonts.gstatic.com/s/materialsymbolsrounded/v74/sykg-zNym6YjUruM-QrEh7-nyTnjDwKNJ_190Fjzag.woff2) format('woff2');
                }

                .material-symbols-rounded {
                font-family: 'Material Symbols Rounded';
                font-weight: normal;
                font-style: normal;
                font-size: 24px;
                line-height: 1;
                letter-spacing: normal;
                text-transform: none;
                display: inline-block;
                white-space: nowrap;
                word-wrap: normal;
                direction: ltr;
                -webkit-font-feature-settings: 'liga';
                -webkit-font-smoothing: antialiased;
                font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 26;
            }
        </style>
        <link   rel="preconnect"                    href="https://fonts.googleapis.com">
        <link   rel="preconnect"                    href="https://fonts.gstatic.com" crossorigin>
        <link   rel="stylesheet"                    href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap">
        <link   rel="preload prefetch"              href="https://fonts.gstatic.com/s/materialsymbolsrounded/v74/sykg-zNym6YjUruM-QrEh7-nyTnjDwKNJ_190Fjzag.woff2" as="font" type="font/woff2" crossorigin onload="clgenld()">
        
        <!-- CSS and JS -->
        <script type="text/javascript"              src="https://lib.plutonny.ru/plutonny.js/v1.0.js?cache=27.04.2023-v300-b14"></script>
        <link   rel="preload prefetch stylesheet"   href="static/main.css?cache=27.04.2023-v300-b14" as="style">
        <link   rel="icon"                          href="static/g-icon.png?cache=27.04.2023-v300-b14">
        <link   rel="apple-touch-icon"              href="pwa-icon-apple.png?cache=27.04.2023-v300-b14">
        <style  id="theming"                        ></style>
        <style  id="currentStyling"                 ></style>

        <!-- GLOBAL VARIABLES -->
        <script type="text/javascript">
            "use strict";
            
            var siteVersion = '3.0.0'
            var siteBuild = '14'

            var DATESTATIC = new Date()
            var SEASON = ''
            let dec10 = new Date(DATESTATIC.getFullYear(), 11, 10), jan20 = new Date(DATESTATIC.getFullYear(), 0, 20), dec31 = new Date(DATESTATIC.getFullYear(), 11, 31), jan01 = new Date(DATESTATIC.getFullYear(), 0, 1)
            if ((dec10 <= DATESTATIC && DATESTATIC <= dec31) || (jan01 <= DATESTATIC && DATESTATIC <= jan20)) { SEASON = 'newyear' }
            else { if ([11, 0, 1].includes(DATESTATIC.getMonth())) SEASON = 'winter'; if ([2, 3, 4].includes(DATESTATIC.getMonth())) SEASON = 'spring'; if ([5, 6, 7].includes(DATESTATIC.getMonth())) SEASON = 'summer'; if ([8, 9, 10].includes(DATESTATIC.getMonth())) SEASON = 'autumn' }

            function addScript(src){ var script = document.createElement('script'); script.type = 'text/javascript'; script.src = src; script.async = false; document.head.appendChild(script) }
        </script>

        <!-- UX -->
        <script type="text/javascript">
            var UX = {
                theme: function() {
                    plutonny.output('theming', `
                    .page {
                        background: radial-gradient(71.06% 29.13% at 131.07% 70.87%, var(--UI-${SEASON}) 0%, rgba(0, 0, 0, 0) 100%), radial-gradient(87.62% 39.56% at -37.62% 39.56%, var(--UI-${SEASON}) 0%, rgba(0, 0, 0, 0) 100%), #000000;
                    }
                    `)
                },
                modal: async function(content) {
                    try {
                        await plutonny.sleep(200)
                        plutonny.console.error('index.html -> UX.modal()', 'ЦВЕТ СТРОКИ СОСТОЯНИЯ УКАЖИ')
                        document.getElementById('theme-color').content = '#2a2a2a'
                        plutonny.output('modal', `
                            <div class="max-modal">
                                <style>
                                    div#modal { position: fixed; height: 100vh; width: 100vw; background-color :#40404075; display: flex; justify-content: center; align-items: center; z-index: 100; }
                                </style>
                                ${content}
                            </div>
                        `) 
                        return true
                    } catch (e) {
                        plutonny.console.error('index.html -> UX.modal()', e)
                        return false
                    }
                }
            }
            UX.theme()
        </script>

        <!-- UI -->
        <script type="text/javascript">
            var UI = {
                header: function(settings) {
                    try {
                        plutonny.output(`header`, `
                            <div class="hdr">
                                <style>
                                    #header {
                                        z-index: 3;
                                        width: 100%;
                                    }
                                    .hdr { 
                                        height: 68px;
                                        display: flex; 
                                        flex-direction: row; 
                                        flex-wrap: nowrap;
                                        align-items: center;
                                    }
                                </style>
                                <div style="height: 38px; width: 38px; z-index: 90; fill: currentColor; margin: 0 0 0 12px; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                                    ${settings.buttonBack ? 
                                    `<span onclick="history.back()" class="material-symbols-rounded icoGo" style="font-size: 32px !important;">arrow_back</span>` : ''}
                                </div>
                                <div style="margin-right: auto;"></div>
                                <p style="text-align: center; font-size: 32px; margin: 0; z-index: 10;" onclick="addScript('//cdn.jsdelivr.net/npm/eruda?t=${DATESTATIC.getTime()}'); eruda.init()">${settings.textCenter}</p>
                                ${settings.addHeart ? `<div style="width: 8px;"></div>
                                                       <img src="static/emoji/heart.png" height="32px" width="32px">` : ''}
                                <div style="margin-right: auto;"></div>
                                <div style="height: 38px; width: 38px; z-index: 90; fill: currentColor; margin: 0 12px 0 0; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                                </div>
                            </div>
                            <hr style="border: none; height: 1px; margin-top: 0; margin-bottom: 0; background-color: var(--text-color); opacity: 0.2; width: calc(100% - 20px);">
                        `)

                        return true

                    } catch (e) { 

                        plutonny.console.error('index.html -> UI.header()', e) 
                        return false

                    }
                },
                cIcon: function(settings) {
                    let colinj = {}
                    if (settings.color[0] == '#') colinj = {
                        icon: settings.color, 
                        button: `${settings.color}40`
                    }
                    else colinj = {
                        icon: `var(--UI-icon-${settings.color})`, 
                        button: `var(--UI-icon-${settings.color}-op)`
                    }
                    return `
                        <div style="user-select: none; height: ${settings.size}px; width: ${settings.size}px; display: flex; align-content: center; justify-content: center; align-items: center; background-color: ${colinj.button}; border-radius: ${settings.border}px">
                            <span style="color: ${colinj.icon}; font-size: ${settings.font}px;" class="material-symbols-rounded icoGo">${settings.icon}</span>
                        </div>
                    `
                },
                rus: function(format, number) {
                    try {
                        var n    = Math.floor(number % 10)
                        var n100 = Math.floor(number % 100)

                        var u1 = [11, 12, 13, 14, 15, 16, 17, 18, 19].includes(n100),
                            u2 = n == 1,
                            u3 = [2, 3, 4].includes(n),
                            u4 = [5, 6, 7, 8, 9, 0].includes(n)

                        switch (format) {
                            case 'week':
                                if (u1 || u4) return number + ' недель'
                                if (u2) return number + ' неделя'
                                if (u3) return number + ' недели'
                                break
                            case 'day':
                                if (u1 || u4) return number + ' дней'
                                if (u2) return number + ' день'
                                if (u3) return number + ' дня'
                                break
                            case 'hour':
                                if (u1 || u4) return number + ' часов'
                                if (u2) return number + ' час'
                                if (u3) return number + ' часа'
                                break
                            case 'minute':
                                if (u1 || u4) return number + ' минут'
                                if (u2) return number + ' минута'
                                if (u3) return number + ' минуты'
                                break
                            case 'second':
                                if (u1 || u4) return number + ' секунд'
                                if (u2) return number + ' секунда'
                                if (u3) return number + ' секунды'
                                break
                            case 'milisecond':
                                if (u1 || u4) return number + ' миллисекунд'
                                if (u2) return number + ' миллисекунда'
                                if (u3) return number + ' миллисекунды'
                                break
                            default:
                                return 'ошибка'
                        }
                    } catch (e) { plutonny.console.error('UI.rus()', e) }
                }
            }
        </script>

        <!-- counters -->
        <script type="text/javascript">
            var COUNT = {
                fast: function(START, END) {
                    let p = (START - DATESTATIC) / (START - END) * 100
                    return `${(parseFloat(parseInt(p * 10)) % 10) > 7 ? parseInt(p + 1) : parseInt(p)} %`
                },
                general: async function(START, END, textPROCESS, textEND) {
                    let NOW = new Date()
                    let p = END - NOW
                    if (p < 0) document.querySelector('.content').innerHTML = `<h1>${textEND}!</h1>`
                    else {
                        document.querySelector('#nameCounter').innerHTML = `${textPROCESS}:`

                        // GENERAL COUNTER TIMER
                        var general_timer = setInterval(function() {
                            let NOW = new Date()
                            let p   = END - NOW
                            if (p > 0) {
                                let r   = (END - NOW) / 1000

                                let rd  = Math.floor(r / 60 / 60 / 24)
                                    r  -=            rd * 60 * 60 * 24
                                let rh  = Math.floor(r / 60 / 60)
                                    r  -=            rh * 60 * 60
                                let rm  = Math.floor(r / 60)
                                    r  -=            rm * 60
                                let rs  = Math.floor(r)
                                    r  -=            rs
                                let rc  = Math.floor(r * 1000)

                                document.querySelector('#general-counter-text').innerHTML = `
                                    ${UI.rus('day', rd)}, 
                                    ${UI.rus('hour', rh)}, 
                                    ${UI.rus('minute', rm)},
                                    <br> 
                                    ${UI.rus('second', rs)}, 
                                    ${UI.rus('milisecond', rc)}
                                `
                            } else COUNT.general(START, END, textPROCESS, textEND)
                        }, 10)

                        var general_timer2 = setInterval(function() {
                            let NOW = new Date()
                            let r   = END - NOW
                            if (r > 0) {
                                let percents = (START - NOW) / (START - END) * 100
                                let p        = parseFloat(parseInt((percents * 1000) + 1)) / 1000

                                document.querySelector('#general-counter-percents').innerHTML = `${p} %`
                                document.querySelector('#general-counter-progressbar').innerHTML = `<style>#general-counter-progressbar { width: ${((document.body.clientWidth - 48) / 100) * p}px; }</style>`
                            }
                        }, 1000)

                        // ADDITIONAL COUNTER TIMER
                        var additional_timer = setInterval(function(){
                            let NOW = new Date()
                            let p   = END - NOW

                            if (p > 0) {
                                let r   = (END - NOW) / 1000

                                let cmn = new Date(NOW.getFullYear(), NOW.getMonth() + 1, END.getDate(), END.getHours(), END.getMinutes(), END.getSeconds())
                                let smn = new Date(NOW.getFullYear(), NOW.getMonth(), END.getDate(), END.getHours(), END.getMinutes(), END.getSeconds())
                                let rmm = (cmn - NOW) / (cmn - smn)

                                let rw  = Math.floor((r / 60 / 60 / 24 / 7) * 100) / 100
                                document.querySelector('#week-text').innerHTML = UI.rus('week', rw)
                                let rd  = Math.floor((r / 60 / 60 / 24) * 100) / 100
                                document.querySelector('#day-text').innerHTML = UI.rus('day', rd)
                                let rh  = Math.floor((r / 60 / 60) * 100) / 100
                                document.querySelector('#hour-text').innerHTML = UI.rus('hour', rh)
                                let rm  = Math.floor((r / 60) * 100) / 100
                                document.querySelector('#minute-text').innerHTML = UI.rus('minute', rm)
                                
                                document.querySelector('#AddiCouG').innerHTML = `
                                #week-progressbar { width: ${((document.body.clientWidth - 48) / 100) * Math.floor((rmm % 1)*100)}px; }
                                #day-progressbar { width: ${((document.body.clientWidth - 48) / 100) * Math.floor((rw % 1)*100)}px; }
                                #hour-progressbar { width: ${((document.body.clientWidth - 48) / 100) * Math.floor((rd % 1)*100)}px; }
                                #minute-progressbar { width: ${((document.body.clientWidth - 48) / 100) * Math.floor((rh % 1)*100)}px; }
                                `
                            }
                        }, 1000)

                        var additional_timer2 = setInterval(function(){
                            let NOW = new Date()
                            let p   = END - NOW
                            if (p > 0) {
                                let r   = (END - NOW) / 1000

                                let rm = r / 60
                                let rs  = Math.floor((r) * 100) / 100
                                document.querySelector('#second-text').innerHTML = UI.rus('second', rs)
                                
                                document.querySelector('#AddiCouA').innerHTML = `#second-progressbar { width: ${((document.body.clientWidth - 48) / 100) * Math.floor((rm % 1)*100)}px; }`
                            }
                        }, 10)
                    }
                }
            }
        </script>

        <!-- serviceWorker -->
        <script type="text/javascript">
            if ('serviceWorker' in navigator) { 
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/service-worker.js').then(
                        function(registration) { console.log(`serviceWorker: registration with scope ${registration.scope}`) },
                        function(e) { plutonny.console.error('index.html ->', `serviceWorker registration failed: ${e}`) }
                    ).catch(function(e) { plutonny.console.error('index.html ->', `serviceWorker function (${e})`) })
                })
            } else plutonny.console.warn('index.html ->', 'service worker is not supported')
        </script>

    </head>
    <body>

        <noscript style="color: white; font-size: 36px;">включите JavaScript чтобы пользоваться сайтом</noscript>

        <div class="modal" id="modal"></div>

        <div id="genload" class="genload">
            <style>
                .icoGo { display: none; }
            </style>
        </div>

        <div id="pageble" class="pageble">
            <div class="page" id="page">
                <div class="header" id="header">
                    <script>
                        UI.header({
                            textCenter: 'my cat',
                            buttonBack: false,
                            addHeart: true
                        })
                    </script>
                </div>
                <div class="content" id="content">
                    <div class="blockGeneral" id="blockGeneral">
                        <div class="lineGeneral" id="lineGeneral"></div>
                        <div class="textGeneral" id="textGeneral"></div>
                    </div>
                    <div style="height: 24px;"></div>
                    <div class="blockAdd" id="blockAdd"></div>
                </div>
            </div>
        </div>

        <!-- PAGE CREATOR -->
        <script type="text/javascript">
            function pageCreator(page) {
                if (page == 'home') {
                    let j1 = new Date(DATESTATIC.getFullYear(), 0, 1), d3 = new Date(DATESTATIC.getFullYear(), 11, 31, 23, 59, 59)
                    let yearP = (document.documentElement.clientWidth - 94) * ((j1 - DATESTATIC) / (j1 - d3))
                    plutonny.output('lineGeneral', `
                    <div style="background: var(--line-general); height: 100%; width: 100%;">
                        <div style="position: absolute; background: var(--con-color); height: 60px; padding: 0 3px; margin-top: -6px; left: calc(42px + ${yearP}px);">
                            <div style="background: var(--text-color); height: 60px; width: 4px; border-radius: 100px;"></div>
                        </div>
                    </div>
                    `)
                }
            }
            pageCreator('home')
        </script>

    </body>
</html>